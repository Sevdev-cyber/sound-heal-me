<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breathwork Debug - Sacred Sound</title>
    <link rel="stylesheet" href="index.css">
    <style>
        body {
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }

        .debug-section {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #8b5cf6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .status-ok {
            color: #4ade80;
        }

        .status-error {
            color: #ef4444;
        }

        pre {
            background: #000;
            padding: 10px;
            border-radius: 8px;
            overflow-x: auto;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <h1>üîç Breathwork Button Debug Tool</h1>

    <div class="debug-section">
        <h3>1. Check DOM Elements</h3>
        <div id="dom-check">Checking...</div>
    </div>

    <div class="debug-section">
        <h3>2. Check CSS Visibility</h3>
        <div id="css-check">Checking...</div>
    </div>

    <div class="debug-section">
        <h3>3. Check Event Listeners</h3>
        <div id="event-check">Checking...</div>
    </div>

    <div class="debug-section">
        <h3>4. Live Button Test</h3>
        <p>If you see this button below, breathwork UI should work:</p>
        <button id="breathStart" class="btn btn-primary" style="width: 100%; margin-top: 10px;">
            Start Practice
        </button>
        <button id="breathPause" class="btn btn-secondary hidden" style="width: 100%; margin-top: 10px;">
            Pause
        </button>
        <button id="breathStop" class="btn btn-ghost hidden" style="width: 100%; margin-top: 10px;">
            Stop
        </button>
        <div id="test-status" style="margin-top: 10px; font-size: 14px;">Status: Waiting for click...</div>
    </div>

    <div class="debug-section">
        <h3>5. Full Console Log</h3>
        <pre id="console-log"></pre>
    </div>

    <!-- Load main breathwork.js to test -->
    <script src="breathwork.js"></script>

    <script>
        const log = [];
        function addLog(msg, type = 'info') {
            const timestamp = new Date().toTimeString().split(' ')[0];
            const logEntry = `[${timestamp}] ${msg}`;
            log.push(logEntry);
            console.log(msg);
            document.getElementById('console-log').textContent = log.join('\n');
        }

        // 1. DOM Check
        addLog('=== DOM ELEMENT CHECK ===');
        const btn = document.getElementById('breathStart');
        const pauseBtn = document.getElementById('breathPause');
        const stopBtn = document.getElementById('breathStop');

        const domCheck = document.getElementById('dom-check');
        if (btn) {
            addLog('‚úÖ breathStart button found');
            domCheck.innerHTML = '<span class="status-ok">‚úÖ breathStart FOUND</span>';
        } else {
            addLog('‚ùå breathStart button NOT found');
            domCheck.innerHTML = '<span class="status-error">‚ùå breathStart NOT FOUND</span>';
        }

        // 2. CSS Check
        addLog('=== CSS VISIBILITY CHECK ===');
        const cssCheck = document.getElementById('css-check');
        if (btn) {
            const styles = window.getComputedStyle(btn);
            const display = styles.display;
            const visibility = styles.visibility;
            const opacity = styles.opacity;

            addLog(`Display: ${display}`);
            addLog(`Visibility: ${visibility}`);
            addLog(`Opacity: ${opacity}`);

            if (display !== 'none' && visibility !== 'hidden' && opacity !== '0') {
                cssCheck.innerHTML = `<span class="status-ok">‚úÖ Button is VISIBLE</span><br>
          Display: ${display}<br>
          Visibility: ${visibility}<br>
          Opacity: ${opacity}`;
            } else {
                cssCheck.innerHTML = `<span class="status-error">‚ùå Button is HIDDEN</span><br>
          Display: ${display}<br>
          Visibility: ${visibility}<br>
          Opacity: ${opacity}`;
            }
        } else {
            cssCheck.innerHTML = '<span class="status-error">‚ùå Cannot check - button not found</span>';
        }

        // 3. Event Listeners
        addLog('=== EVENT LISTENER CHECK ===');
        const eventCheck = document.getElementById('event-check');

        // Check if breathwork engine is loaded
        if (window.breathworkEngine) {
            addLog('‚úÖ breathworkEngine loaded');
            eventCheck.innerHTML = '<span class="status-ok">‚úÖ breathworkEngine loaded</span>';

            // Check if init was called
            if (window.breathworkEngine.initialized !== undefined) {
                addLog(`Initialized: ${window.breathworkEngine.initialized}`);
            }
        } else {
            addLog('‚ùå breathworkEngine NOT loaded');
            eventCheck.innerHTML = '<span class="status-error">‚ùå breathworkEngine NOT loaded</span>';
        }

        // 4. Manual button test
        const testStatus = document.getElementById('test-status');
        if (btn) {
            btn.addEventListener('click', () => {
                addLog('üéØ START button clicked!');
                testStatus.innerHTML = '<span class="status-ok">‚úÖ Button clicked! Event listener works!</span>';

                // Toggle buttons
                btn.classList.add('hidden');
                pauseBtn.classList.remove('hidden');
                stopBtn.classList.remove('hidden');
            });
        }

        if (pauseBtn) {
            pauseBtn.addEventListener('click', () => {
                addLog('‚è∏Ô∏è PAUSE button clicked');
                testStatus.textContent = 'Paused';
            });
        }

        if (stopBtn) {
            stopBtn.addEventListener('click', () => {
                addLog('üõë STOP button clicked');
                testStatus.textContent = 'Stopped';
                btn.classList.remove('hidden');
                pauseBtn.classList.add('hidden');
                stopBtn.classList.add('hidden');
            });
        }

        addLog('=== DIAGNOSTIC COMPLETE ===');
        addLog('If all checks are ‚úÖ, the breathwork button SHOULD work on main page.');
        addLog('If any checks are ‚ùå, scroll up to see what failed.');
    </script>
</body>

</html>